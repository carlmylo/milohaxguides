---
title: MIDI Keyboard
slug: "en/rb3pc/controllers/keys/midi"
description: "How to connect and configure a MIDI Keyboard on RPCS3."
tableOfContents: false
---
import { Aside } from '@astrojs/starlight/components';
import midikeyscontroller from '@assets/rb3/rpcs3/instruments/controller/midikeyscontroller.png';
import rpcs3nomap from '@assets/rb3/rpcs3/instruments/maps/rpcs3nomap.png';
import usbkeys from '@assets/rb3/rpcs3/instruments/setup/midi/usbkeys.png';
import midikeys from '@assets/rb3/rpcs3/instruments/setup/midi/midikeys.png';
import miditousb from '@assets/rb3/rpcs3/instruments/setup/midi/miditousb.png';
import midifs from '@assets/rb3/rpcs3/instruments/setup/midi/midifs.png';
import rpcs3customconfigchange from '@assets/rb3/rpcs3/config/rpcs3customconfigchange.png';
import iok from '@assets/rb3/rpcs3/config/iok.png';
import keysctrl from '@assets/rb3/rpcs3/instruments/setup/midi/keysctrl.png';
import midikeysoctshift from '@assets/rb3/rpcs3/instruments/setup/midi/midikeysoctshift.gif';
import midictrlloopMIDIdl from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlloopMIDIdl.png';
import midictrlloopMIDIinst from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlloopMIDIinst.png';
import midictrlloopMIDIaddport from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlloopMIDIaddport.png';
import midictrlfreepnodl from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnodl.png';
import midictrlfreepnodir from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnodir.png';
import midictrlfreepnopreset from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnopreset.png';
import midictrlfreepnoselpres from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnoselpres.png';
import midictrlfreepnoout from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnoout.png';
import midictrlfreepnoback from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlfreepnoback.png';
import midictrlmidioxdl from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlmidioxdl.png';
import midictrlmidioxinst from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlmidioxinst.png';
import midictrlmidioxopts from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlmidioxopts.png';
import midictrlmidioxcombo from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlmidioxcombo.png';
import midictrlrpcs3 from '@assets/rb3/rpcs3/instruments/setup/midi/midictrlrpcs3.png';
import { Image } from 'astro:assets';

<center><img src="/milohaxguides/assets/instruments/logos/midi.png" alt="Platform" title="Platform"></img></center>
<center><Image src={midikeyscontroller} alt="Controller" /></center>

<Aside type="caution"><Image src={rpcs3nomap} alt="A warning that says not to map this controller!" />  
Do NOT map this instrument via the `Pads` menu!
</Aside>
<Aside type="caution">RPCN Menus (for sending or accepting online invites) **will** cause a softlock. You will need an alternative input method to navigate these menus, such as a <a href="../../main#gamepads" target="_blank" rel="noopener noreferrer">[typing keyboard or a gamepad.]</a></Aside>

* It is suggested to have a keyboard with **at least 37 keys** or 25 keys and 11 drum pads.
* Your MIDI keyboard needs to:
	* **be set to MIDI Channel 1.**
	* **have modultation and pitch controls.**
	* optionally have a sustain pedal.

## Setting Up
**If your keyboard has a USB port**, all you need to do is **plug it into your computer**.  
><Image src={usbkeys} alt="The back of a MIDI controller showing a USB port and a sustain pedal" />

**If your keyboard only has a MIDI output, you will need a MIDI to USB interface**.  
><Image src={midikeys} alt="The back of a MIDI controller showing a 5-DIN MIDI input and output highlighted in yellow with a solid white outline, and multiple pedal inputs." />

Here's an example of a MIDI to USB interface. Most will come with an LED indicator to show activity. **To check that you've plugged it in correctly, you should see "MIDI In" blinking when you press a key**.  
><Image src={miditousb} alt="A MIDI to USB interface." />

**If you have an audio interface, you may already have a way to plug in MIDI** to your computer, as some audio interfaces come with MIDI inputs. For example, this Scarlett has MIDI connections in the back.  
><Image src={midifs} alt="The back of a Focusrite Scarlett showing a USB port, and 5-DIN MIDI input and output." />

Find whichever way is the most convenient for you then connect your MIDI Keyboard to your computer.

After that, **right click on Rock Band 3** in RPCS3, then click on `Change Custom Configuration`.  
<Image src={rpcs3customconfigchange} alt="RPCS3's right click menu, showing 'Change Custom Configuration' highlighted." />

After that, go to the `I/O` tab.

<Image src={iok} alt="Rock Band 3's I/O custom settings within RPCS3, showing Emulated MIDI Devices, device type, and device selection highlighted in tan with a solid outline." />  
* ![A tan square with a solid outline](/milohaxguides/assets/rb3pc/config/smalltan.png "Tan Square") :
	* üéπ Keyboard Players: Leave your ‚ÄúEmulated MIDI type‚Äù on ‚ÄúKeyboard‚Äù and select your keyboard or MIDI interface in the drop-down menu next to it.

### Mapping
MIDI Keyboards have fixed bindings and cannot be changed within RPCS3. Since they don't have PS3 buttons, the first octave is dedicated to PS3 buttons. Use the following image as a reference. It's recommended to put stickers or some sort of reminder on your keyboard to easily notate the buttons and the ranges.

<Image src={keysctrl} alt="A 37 key keyboard, showing the second octave mapped to PlayStation buttons, C3 to E3 under a red color, F3 to B3 under a yellow color, C4 to E4 under a blue color, F4 to B4 under a green color, and C5 under an orange color." />

| **Note#** | **Note** | **Note (Yamaha)** | **Button** |
|:-------:|:--------:|:-----------------:|:----------:|
| #36 | C2 | C1 | ![Select](/milohaxguides/assets/instruments/buttons/ps3/sel.png "Select") |
| #38 | D2 | D1 | ![D-Pad Left](/milohaxguides/assets/instruments/buttons/ps3/dl.png "D-Pad Left") |
| #40 | E2 | E1 | ![D-Pad Right](/milohaxguides/assets/instruments/buttons/ps3/dr.png "D-Pad Right") |
| #41 | F2 | F1 | ![D-Pad Up](/milohaxguides/assets/instruments/buttons/ps3/du.png "D-Pad Up") |
| #43 | G2 | G1 | ![D-Pad Down](/milohaxguides/assets/instruments/buttons/ps3/dd.png "D-Pad Down") |
| #45 | A2 | A1 | Deploy Overdrive |
| #37 | C#2 | C#1 | ![Triangle](/milohaxguides/assets/instruments/buttons/ps3/t.png "Triangle") |
| #39 | D#2 | D#1 | ![Square](/milohaxguides/assets/instruments/buttons/ps3/s.png "Square") |
| #42 | F#2 | F#1 | ![Circle](/milohaxguides/assets/instruments/buttons/ps3/o.png "Circle") |
| #44 | G#2 | G#1 | ![Cross](/milohaxguides/assets/instruments/buttons/ps3/x.png "Cross") |
| #46 | A#2 | A#1 | ![Start](/milohaxguides/assets/instruments/buttons/ps3/sta.png "Start") |
| Pitch Bend | Pitch Bend | Pitch Bend | Whammy/Touch Strip |
| CC#1 | Modwheel | Modwheel | Deploy Overdrive |
| CC#64 | Sustain | Sustain | Deploy Overdrive |

#### 25 Key Keyboards
Keyboards with less than 25 keys will have to shift octaves when switching between the game keys and the game buttons.  
<Image src={midikeysoctshift} alt="A MIDI keyboard. When the octave down button is activated, a yellow highlight, showing which notes are being used, shifts down to C2 to C4. When the octave down button is deactivated, it shifts back up to C3 to C5." />

<details>
<summary>[Using a computer keyboard along with a 25 key keyboard]</summary>

<Aside>**This requires advanced setup!**</Aside>

You can use your regular computer keyboard and convert its key presses to the MIDI notes that correspond to the game buttons in case you want to avoid swapping octaves constantly.

First, <a href="https://www.tobias-erichsen.de/software/loopmidi.html" target="_blank" rel="noopener noreferrer">[download loopMIDI]</a>.  
> <a href="https://www.tobias-erichsen.de/software/loopmidi.html" target="_blank" rel="noopener noreferrer"><Image src={midictrlloopMIDIdl} alt="loopMIDI's download page. The cursor is over 'download loopMIDI.'" /></a>

Install loopMIDI.  
**Launch it after it finishes.**  
> <Image src={midictrlloopMIDIinst} alt="loopMIDI's installer." />

Add two new ports by clicking on the `+` button in the bottom. You should name the ports, too. They‚Äôve been named ‚ÄúPro Keys‚Äù and ‚ÄúGamepad‚Äù in this example.  
> <Image src={midictrlloopMIDIaddport} alt="loopMIDI with a mouse cursor over the Plus symbol for 'Add Port'. Additionally, 'New port name' is highlighted in blue with a dotted outline, with 'Pro Keys' typed out in the text field." />

Now, download <a href="https://freepiano.tiwb.com/en/" target="_blank" rel="noopener noreferrer">[the `.zip` archive that contains the win64 version of FreePiano]</a>.  
> <a href="https://freepiano.tiwb.com/en" target="_blank" rel="noopener noreferrer"><Image src={midictrlfreepnodl} alt="FreePiano's download page'" /></a>

Extract the `.zip` archive somewhere you can easily find it.  
It was extracted to `C:\Games\freepiano` in this example.

Go to where you extracted FreePiano and run the `freepiano` executable.  
> <Image src={midictrlfreepnodir} alt="The FreePiano executable highlighted in a folder." />

Assign the keys to your liking as shown in the [**[#Mapping]**](#mapping) section above.  
There is also a premade profile if you‚Äôd like, which you can [**[download here]**](/../../milohaxguides/downloads/rb3/rpcs3/instrument-repo/rb3gamekeys.map). 

To use the preset, place the `rb3gamekeys.map` file in the `keymap` folder located where you extracted FreePiano.  
> <Image src={midictrlfreepnopreset} alt="A highlighted profile named rb3gamekeys.map in the keymap folder." />

Select `rb3gamekeys.map` in the `Keymap` dropdown button to load the premade profile.  
Likewise, if you made your own profile or edited the premade profile, you can click on **`Save`** to save your profile.  
> <Image src={midictrlfreepnoselpres} alt="FreePiano with the rb3gamekeys.map profile selected." />

The premade profile is mapped like this:
| **Key** | **Action** |
|:---:|:---:|
| `Enter` | ![Start](/milohaxguides/assets/instruments/buttons/ps3/sta.png "Start") |
| `Shift` | ![Select](/milohaxguides/assets/instruments/buttons/ps3/sel.png "Select") |
| `Up` | ![D-Pad Up](/milohaxguides/assets/instruments/buttons/ps3/du.png "D-Pad Up") |
| `Down` | ![D-Pad Down](/milohaxguides/assets/instruments/buttons/ps3/dd.png "D-Pad Down") |
| `Left` | ![D-Pad Left](/milohaxguides/assets/instruments/buttons/ps3/dl.png "D-Pad Left") |
| `Right` | ![D-Pad Right](/milohaxguides/assets/instruments/buttons/ps3/dr.png "D-Pad Right") |
| `A` | ![Cross](/milohaxguides/assets/instruments/buttons/ps3/x.png "Cross") |
| `S` | ![Circle](/milohaxguides/assets/instruments/buttons/ps3/o.png "Circle") |
| `D` | ![Square](/milohaxguides/assets/instruments/buttons/ps3/s.png "Square") |
| `F` | ![Triangle](/milohaxguides/assets/instruments/buttons/ps3/t.png "Triangle") |

Once you are done mapping, click on `Instrument` at the top of Freepiano‚Äôs window and select the `Gamepad` MIDI output, which you made with loopMIDI earlier.  
> <Image src={midictrlfreepnoout} alt="FreePiano's Instrument dropdown menu with 'Gamepad MIDI' selected." />

It‚Äôs suggested you enable `Background input mode`, located within the `Options` tab which is accessed by pressing the Wrench icon in the top right side of FreePiano.  
> <Image src={midictrlfreepnoback} alt="FreePiano with the 'Background input mode' enabled." />

Now, <a href="http://www.midiox.com/moxdown.htm" target="_blank" rel="noopener noreferrer">[download MIDI-OX]</a>.  
> <a href="http://www.midiox.com/moxdown.htm" target="_blank" rel="noopener noreferrer"><Image src={midictrlmidioxdl} alt="MIDI-OX's website with the proper download highlighted in blue with a dotted outline" /></a>

Install MIDI-OX.  
> <Image src={midictrlmidioxinst} alt="MIDI-OX's installer." />

Open MIDI-OX then navigate to **`Options` > `MIDI Devices`**  
> <Image src={midictrlmidioxopts} alt="MIDI-OX with the mouse hovering over the MIDI Devices menu, under the Options menu." />

In the `MIDI Devices` menu, select your keyboard and the port you made in loopMIDI (‚ÄúGamepad‚Äù) for FreePiano in the `MIDI Inputs` section.  
Select the other port you made in loopMIDI (‚ÄúPro Keys‚Äù) in `MIDI Outputs`. This will combine both MIDI inputs into a single output.  
> <Image src={midictrlmidioxcombo} alt="MIDI-OX's MIDI Devices with a keyboard and the Gamepad selected in the MIDI Inputs section and Pro Keys selected in the MIDI Outputs section." />

Finally, in RPCS3, go to Rock Band 3‚Äôs Custom Configuration then go to the `I/O` tab.  
Select the port that you selected as your output in MIDI-OX (‚ÄúPro Keys‚Äù).  
> <Image src={midictrlrpcs3} alt="Rock Band 3's I/O custom settings showing Emulated MIDI Devices, device type, and device selection highlighted in tan with a solid outline. It is set to 'Keyboard - Pro Keys 3.'" />

That‚Äôs it. Remember to close all **three different programs** when you‚Äôre not using them because they may cause issues with certain shortcuts on Windows.  
You will have to reopen these programs every time you want to play.
</details>

[[Back to Controllers]](../../main/)

Implementation by [[Dark]](https://dark.ski/)
